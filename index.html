<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santa Express</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: url('assets/images/background.png') no-repeat center center fixed;
            background-size: cover;
        }
        #game-container {
            width: 800px;
            height: 600px;
            margin: 20px auto;
            position: relative;
            overflow: hidden;
        }
        #santa {
            position: absolute;
            width: 100px;
            height: 60px;
            background: url('assets/images/santa-sleigh.png') no-repeat;
            background-size: contain;
        }
        .present, .chimney, .cloud, .bird, .drone, .star, .snowflake {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
        }
        .present { background-image: url('assets/images/present.png'); width: 40px; height: 40px; }
        .chimney { background-image: url('assets/images/chimney.png'); width: 60px; height: 80px; }
        .cloud { background-image: url('assets/images/cloud.png'); width: 100px; height: 60px; }
        .bird { background-image: url('assets/images/bird.png'); width: 50px; height: 30px; }
        .drone { background-image: url('assets/images/drone.png'); width: 40px; height: 40px; }
        .star { background-image: url('assets/images/star.png'); width: 30px; height: 30px; }
        .snowflake { background-image: url('assets/images/snowflake.png'); width: 20px; height: 20px; }
        #menu {
            position: absolute;
            top: 10px;
            right: 10px;
        }
        #settings {
            display: none;
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="santa"></div>
    </div>
    <div id="menu">
        <button onclick="toggleSettings()">Paramètres</button>
        <div id="settings">
            <h3>Paramètres</h3>
            <label>Volume musique: <input type="range" id="musicVolume" min="0" max="1" step="0.1" value="0.5"></label><br>
            <label>Volume effets sonores: <input type="range" id="sfxVolume" min="0" max="1" step="0.1" value="0.5"></label><br>
            <h4>Touches:</h4>
            <label>Haut: <input type="text" id="upKey" value="ArrowUp"></label><br>
            <label>Bas: <input type="text" id="downKey" value="ArrowDown"></label><br>
            <label>Gauche: <input type="text" id="leftKey" value="ArrowLeft"></label><br>
            <label>Droite: <input type="text" id="rightKey" value="ArrowRight"></label><br>
            <label>Larguer cadeau: <input type="text" id="dropKey" value=" "></label><br>
            <button onclick="saveSettings()">Sauvegarder</button>
        </div>
    </div>

    <script>
        const santa = document.getElementById('santa');
        const gameContainer = document.getElementById('game-container');
        let santaX = 0;
        let santaY = 250;
        const speed = 5;

        // Sons
        const jingleSound = new Audio('assets/sounds/jingle.mp3');
        const dropSound = new Audio('assets/sounds/drop.mp3');
        const collectSound = new Audio('assets/sounds/collect.mp3');
        const crashSound = new Audio('assets/sounds/crash.mp3');
        const successSound = new Audio('assets/sounds/success.mp3');

        // Contrôles
        let controls = {
            up: 'ArrowUp',
            down: 'ArrowDown',
            left: 'ArrowLeft',
            right: 'ArrowRight',
            drop: ' '
        };

        function updateSantaPosition() {
            santa.style.left = santaX + 'px';
            santa.style.top = santaY + 'px';
        }

        document.addEventListener('keydown', (event) => {
            switch(event.key) {
                case controls.up:
                    if (santaY > 0) santaY -= speed;
                    break;
                case controls.down:
                    if (santaY < gameContainer.offsetHeight - santa.offsetHeight) santaY += speed;
                    break;
                case controls.left:
                    if (santaX > 0) santaX -= speed;
                    break;
                case controls.right:
                    if (santaX < gameContainer.offsetWidth - santa.offsetWidth) santaX += speed;
                    break;
                case controls.drop:
                    dropPresent();
                    break;
            }
            updateSantaPosition();
        });

        function dropPresent() {
            const present = document.createElement('div');
            present.className = 'present';
            present.style.left = (santaX + santa.offsetWidth / 2) + 'px';
            present.style.top = (santaY + santa.offsetHeight) + 'px';
            gameContainer.appendChild(present);
            dropSound.play();
            
            const dropInterval = setInterval(() => {
                const currentTop = parseInt(present.style.top);
                if (currentTop < gameContainer.offsetHeight) {
                    present.style.top = (currentTop + 5) + 'px';
                } else {
                    clearInterval(dropInterval);
                    gameContainer.removeChild(present);
                }
            }, 50);
        }

        function toggleSettings() {
            const settings = document.getElementById('settings');
            settings.style.display = settings.style.display === 'none' ? 'block' : 'none';
        }

        function saveSettings() {
            controls.up = document.getElementById('upKey').value;
            controls.down = document.getElementById('downKey').value;
            controls.left = document.getElementById('leftKey').value;
            controls.right = document.getElementById('rightKey').value;
            controls.drop = document.getElementById('dropKey').value;

            jingleSound.volume = document.getElementById('musicVolume').value;
            dropSound.volume = document.getElementById('sfxVolume').value;
            collectSound.volume = document.getElementById('sfxVolume').value;
            crashSound.volume = document.getElementById('sfxVolume').value;
            successSound.volume = document.getElementById('sfxVolume').value;

            toggleSettings();
        }

        // Démarrage du jeu
        jingleSound.loop = true;
        jingleSound.play();
        updateSantaPosition();

        // Ici, vous pouvez ajouter des fonctions pour générer des obstacles, des étoiles, etc.
        // ainsi que la logique pour détecter les collisions et gérer le score.
    </script>
</body>
</html>
