<!DOCTYPE html>
2<html>
3<head>
4  <title>Santa Express</title>
5  <style>
6    body {
7      margin: 0;
8      overflow: hidden;
9    }
10
11    #game-container {
12      width: 800px;
13      height: 600px;
14      border: 1px solid black;
15    }
16
17    #settings-menu {
18      position: absolute;
19      top: 50%;
20      left: 50%;
21      transform: translate(-50%, -50%);
22      background-color: white;
23      padding: 20px;
24      border: 1px solid black;
25      display: none;
26    }
27
28    #score {
29      position: absolute;
30      top: 10px;
31      left: 10px;
32      font-size: 20px;
33    }
34
35    #start-button {
36      position: absolute;
37      top: 50%;
38      left: 50%;
39      transform: translate(-50%, -50%);
40      padding: 10px 20px;
41      background-color: green;
42      color: white;
43      border: none;
44      cursor: pointer;
45    }
46
47    #stop-button {
48      position: absolute;
49      top: 50%;
50      left: 50%;
51      transform: translate(-50%, -50%);
52      padding: 10px 20px;
53      background-color: red;
54      color: white;
55      border: none;
56      cursor: pointer;
57      display: none;
58    }
59
60    #settings-button {
61      position: absolute;
62      top: 10px;
63      right: 10px;
64      padding: 10px 20px;
65      background-color: blue;
66      color: white;
67      border: none;
68      cursor: pointer;
69    }
70
71    .settings-label {
72      display: block;
73      margin-bottom: 5px;
74    }
75
76    .settings-input {
77      width: 100%;
78      padding: 5px;
79      margin-bottom: 10px;
80    }
81
82    #save-settings {
83      padding: 10px 20px;
84      background-color: green;
85      color: white;
86      border: none;
87      cursor: pointer;
88    }
89  </style>
90</head>
91<body>
92  <canvas id="game-container"></canvas>
93
94  <div id="score"></div>
95
96  <button id="start-button">Démarrer</button>
97  <button id="stop-button">Arrêter</button>
98  <button id="settings-button">Paramètres</button>
99
100  <div id="settings-menu">
101    <label class="settings-label" for="volume-music">Volume de la musique:</label>
102    <input class="settings-input" type="range" id="volume-music" min="0" max="1" step="0.1" value="0.5">
103
104    <label class="settings-label" for="volume-sound-effects">Volume des effets sonores:</label>
105    <input class="settings-input" type="range" id="volume-sound-effects" min="0" max="1" step="0.1" value="0.5">
106
107    <label class="settings-label" for="up">Touche Haut:</label>
108    <input class="settings-input key-binding-input" type="text" id="up" name="up" value="ArrowUp">
109
110    <label class="settings-label" for="down">Touche Bas:</label>
111    <input class="settings-input key-binding-input" type="text" id="down" name="down" value="ArrowDown">
112
113    <label class="settings-label" for="left">Touche Gauche:</label>
114    <input class="settings-input key-binding-input" type="text" id="left" name="left" value="ArrowLeft">
115
116    <label class="settings-label" for="right">Touche Droite:</label>
117    <input class="settings-input key-binding-input" type="text" id="right" name="right" value="ArrowRight">
118
119    <button id="save-settings">Enregistrer</button>
120  </div>
121
122  <script>
123    // Initialisation des variables
124    let gameStarted = false;
125    let score = 0;
126    let volumeMusic = 0.5;
127    let volumeSoundEffects = 0.5;
128    let keyBindings = {
129      up: "ArrowUp",
130      down: "ArrowDown",
131      left: "ArrowLeft",
132      right: "ArrowRight"
133    };
134
135    // Éléments du DOM
136    const gameContainer = document.getElementById("game-container");
137    const scoreDisplay = document.getElementById("score");
138    const settingsMenu = document.getElementById("settings-menu");
139    const volumeMusicSlider = document.getElementById("volume-music");
140    const volumeSoundEffectsSlider = document.getElementById("volume-sound-effects");
141    const keyBindingsInput = document.querySelectorAll(".key-binding-input");
142    const saveSettingsButton = document.getElementById("save-settings");
143    const startButton = document.getElementById("start-button");
144    const stopButton = document.getElementById("stop-button");
145    const settingsButton = document.getElementById("settings-button");
146
147    // Images
148    const santaSleighImage = new Image();
149    santaSleighImage.src = "assets/images/santa-sleigh.png";
150    const presentImage = new Image();
151    presentImage.src = "assets/images/present.png";
152    const chimneyImage = new Image();
153    chimneyImage.src = "assets/images/chimney.png";
154    const cloudImage = new Image();
155    cloudImage.src = "assets/images/cloud.png";
156    const birdImage = new Image();
157    birdImage.src = "assets/images/bird.png";
158    const droneImage = new Image();
159    droneImage.src = "assets/images/drone.png";
160    const starImage = new Image();
161    starImage.src = "assets/images/star.png";
162    const backgroundImage = new Image();
163    backgroundImage.src = "assets/images/background.png";
164    const snowflakeImage = new Image();
165    snowflakeImage.src = "assets/images/snowflake.png";
166
167    // Sons
168    const jingleMusic = new Audio("assets/sounds/jingle.mp3");
169    const dropSound = new Audio("assets/sounds/drop.mp3");
170    const collectSound = new Audio("assets/sounds/collect.mp3");
171    const crashSound = new Audio("assets/sounds/crash.mp3");
172    const successSound = new Audio("assets/sounds/success.mp3");
173
174    // Objets du jeu
175    const santaSleigh = {
176      x: 100,
177      y: 300,
178      width: 50,
179      height: 30,
180      speed: 5
181    };
182
183    const presents = [];
184    const chimneys = [];
185    const stars = [];
186    const clouds = [];
187    const birds = [];
188    const drones = [];
189
190    // Fonction pour dessiner le fond
191    function drawBackground() {
192      gameContainer.getContext("2d").drawImage(backgroundImage, 0, 0);
193    }
194
195    // Fonction pour dessiner un flocon de neige
196    function drawSnowflake(x, y) {
197      gameContainer.getContext("2d").drawImage(snowflakeImage, x, y);
198    }
199
200    // Fonction pour dessiner un nuage
201    function drawCloud(x, y) {
202      gameContainer.getContext("2d").drawImage(cloudImage, x, y);
203    }
204
205    // Fonction pour dessiner un oiseau
206    function drawBird(x, y) {
207      gameContainer.getContext("2d").drawImage(birdImage, x, y);
208    }
209
210    // Fonction pour dessiner un drone
211    function drawDrone(x, y) {
212      gameContainer.getContext("2d").drawImage(droneImage, x, y);
213    }
214
215    // Fonction pour dessiner une étoile
216    function drawStar(x, y) {
217      gameContainer.getContext("2d").drawImage(starImage, x, y);
218    }
219
220    // Fonction pour dessiner un traîneau du Père Noël
221    function drawSantaSleigh(x, y) {
222      gameContainer.getContext("2d").drawImage(santaSleighImage, x, y);
223    }
224
225    // Fonction pour dessiner un cadeau
226    function drawPresent(x, y) {
227      gameContainer.getContext("2d").drawImage(presentImage, x, y);
228    }
229
230    // Fonction pour dessiner une cheminée
231    function drawChimney(x, y) {
232      gameContainer.getContext("2d").drawImage(chimneyImage, x, y);
233    }
234
235    // Fonction pour mettre à jour le score
236    function updateScore() {
237      scoreDisplay.textContent = "Score: " + score;
238    }
239
240    // Fonction pour gérer les collisions
241    function handleCollisions(x, y, width, height) {
242      // Vérifier si le traîneau du Père Noël est en collision avec un obstacle
243      // (par exemple, un drone, un oiseau ou un nuage)
244      drones.forEach(drone => {
245        if (
246          x < drone.x + drone.width &&
247          x + width > drone.x &&
248          y < drone.y + drone.height &&
249          y + height > drone.y
250        ) {
251          crashSound.play();
252          santaSleigh.x = 100;
253          santaSleigh.y = 300;
254        }
255      });
256
257      birds.forEach(bird => {
258        if (
259          x < bird.x + bird.width &&
260          x + width > bird.x &&
261          y < bird.y + bird.height &&
262          y + height > bird.y
263        ) {
264          crashSound.play();
265          santaSleigh.x = 100;
266          santaSleigh.y = 300;
267        }
268      });
269
270      clouds.forEach(cloud => {
271        if (
272          x < cloud.x + cloud.width &&
273          x + width > cloud.x &&
274          y < cloud.y + cloud.height &&
275          y + height > cloud.y
276        ) {
277          crashSound.play();
278          santaSleigh.x = 100;
279          santaSleigh.y = 300;
280        }
281      });
282    }
283
284    // Fonction pour gérer les cadeaux
285    function handlePresents(x, y, width, height) {
286      // Vérifier si un cadeau atteint une cheminée
287      presents.forEach((present, index) => {
288        chimneys.forEach(chimney => {
289          if (
290            present.x < chimney.x + chimney.width &&
291            present.x + present.width > chimney.x &&
292            present.y < chimney.y + chimney.height &&
293            present.y + present.height > chimney.y
294          ) {
295            successSound.play();
296            score++;
297            updateScore();
298            presents.splice(index, 1);
299          }
300        });
301      });
302    }
303
304    // Fonction pour gérer les étoiles
305    function handleStars(x, y, width, height) {
306      // Vérifier si le traîneau du Père Noël collecte une étoile
307      stars.forEach((star, index) => {
308        if (
309          x < star.x + star.width &&
310          x + width > star.x &&
311          y < star.y + star.height &&
312          y + height > star.y
313        ) {
314          collectSound.play();
315          score += 10;
316          updateScore();
317          stars.splice(index, 1);
318        }
319      });
320    }
321
322    // Fonction pour mettre à jour le jeu
323    function updateGame() {
324      // Mettre à jour la position du traîneau du Père Noël en fonction des touches appuyées
325      if (keyBindings.up === "ArrowUp" && santaSleigh.y > 0) {
326        santaSleigh.y -= santaSleigh.speed;
327      }
328      if (keyBindings.down === "ArrowDown" && santaSleigh.y < gameContainer.height - santaSleigh.height) {
329        santaSleigh.y += santaSleigh.speed;
330      }
331      if (keyBindings.left === "ArrowLeft" && santaSleigh.x > 0) {
332        santaSleigh.x -= santaSleigh.speed;
333      }
334      if (keyBindings.right === "ArrowRight" && santaSleigh.x < gameContainer.width - santaSleigh.width) {
335        santaSleigh.x += santaSleigh.speed;
336      }
337
338      // Dessiner le fond et tous les éléments du jeu
339      gameContainer.getContext("2d").clearRect(0, 0, gameContainer.width, gameContainer.height);
340      drawBackground();
341
342      // Dessiner les flocons de neige
343      for (let i = 0; i < 50; i++) {
344        drawSnowflake(Math.random() * gameContainer.width, Math.random() * gameContainer.height);
345      }
346
347      // Dessiner les nuages
348      clouds.forEach(cloud => {
349        drawCloud(cloud.x, cloud.y);
350      });
351
352      // Dessiner les oiseaux
353      birds.forEach(bird => {
354        drawBird(bird.x, bird.y);
355      });
356
357      // Dessiner les drones
358      drones.forEach(drone => {
359        drawDrone(drone.x, drone.y);
360      });
361
362      // Dessiner les étoiles
363      stars.forEach(star => {
364        drawStar(star.x, star.y);
365      });
366
367      // Dessiner les cadeaux
368      presents.forEach(present => {
369        drawPresent(present.x, present.y);
370      });
371
372      // Dessiner les cheminées
373      chimneys.forEach(chimney => {
374        drawChimney(chimney.x, chimney.y);
375      });
376
377      // Dessiner le traîneau du Père Noël
378      drawSantaSleigh(santaSleigh.x, santaSleigh.y);
379
380      // Gérer les collisions
381      handleCollisions(santaSleigh.x, santaSleigh.y, santaSleigh.width, santaSleigh.height);
382
383      // Gérer les cadeaux
384      handlePresents(santaSleigh.x, santaSleigh.y, santaSleigh.width, santaSleigh.height);
385
386      // Gérer les étoiles
387      handleStars(santaSleigh.x, santaSleigh.y, santaSleigh.width, santaSleigh.height);
388
389      // Mettre à jour le score
390      updateScore();
391
392      // Continuer la boucle de jeu
393      requestAnimationFrame(updateGame);
394    }
395
396    // Fonction pour démarrer le jeu
397    function startGame() {
398      gameStarted = true;
399      // Initialiser le jeu
400      jingleMusic.play();
401      jingleMusic.volume = volumeMusic;
402
403      // Générer des cadeaux
404      for (let i = 0; i < 10; i++) {
405        presents.push({
406          x: Math.random() * gameContainer.width,
407          y: 0,
408          width: 30,
409          height: 30
410        });
411      }
412
413      // Générer des cheminées
414      for (let i = 0; i < 5; i++) {
415        chimneys.push({
416          x: Math.random() * gameContainer.width,
417          y: gameContainer.height - 100,
418          width: 40,
419          height: 80
420        });
421      }
422
423      // Générer des étoiles
424      for (let i = 0; i < 20; i++) {
425        stars.push({
426          x: Math.random() * gameContainer.width,
427          y: Math.random() * gameContainer.height,
428          width: 20,
429          height: 20
430        });
431      }
432
433      // Générer des nuages
434      for (let i = 0; i < 5; i++) {
435        clouds.push({
436          x: Math.random() * gameContainer.width,
437          y: Math.random() * gameContainer.height / 2,
438          width: 100,
439          height: 50
440        });
441      }
442
443      // Générer des oiseaux
444      for (let i = 0; i < 10; i++) {
445        birds.push({
446          x: Math.random() * gameContainer.width,
447          y: Math.random() * gameContainer.height / 2,
448          width: 30,
449          height: 20
450        });
451      }
452
453      // Générer des drones
454      for (let i = 0; i < 5; i++) {
455        drones.push({
456          x: Math.random() * gameContainer.width,
457          y: Math.random() * gameContainer.height / 2,
458          width: 40,
459          height: 30
460        });
461      }
462
463      // Démarrer la boucle de jeu
464      requestAnimationFrame(updateGame);
465    }
466
467    // Fonction pour arrêter le jeu
468    function stopGame() {
469      gameStarted = false;
470      // Arrêter la boucle de jeu
471      jingleMusic.pause();
472    }
473
474    // Fonction pour gérer les événements des touches
475    function handleKeypress(event) {
476      if (gameStarted) {
477        // Mettre à jour la position du traîneau du Père Noël en fonction de la touche appuyée
478        // ...
479      }
480    }
481
482    // Fonction pour gérer les événements du curseur du volume de la musique
483    function handleVolumeMusicChange(event) {
484      volumeMusic = event.target.value;
485      jingleMusic.volume = volumeMusic;
486    }
487
488    // Fonction pour gérer les événements du curseur du volume des effets sonores
489    function handleVolumeSoundEffectsChange(event) {
490      volumeSoundEffects = event.target.value;
491      dropSound.volume = volumeSoundEffects;
492      collectSound.volume = volumeSoundEffects;
493      crashSound.volume = volumeSoundEffects;
494      successSound.volume = volumeSoundEffects;
495    }
496
497    // Fonction pour gérer les événements de changement des touches
498    function handleKeyBindingChange(event) {
499      // Mettre à jour les touches du jeu
500      keyBindings[event.target.name] = event.target.value;
501    }
502
503    // Fonction pour enregistrer les paramètres
504    function saveSettings() {
505      // Enregistrer les paramètres du jeu
506      // ...
507      settingsMenu.style.display = "none";
508    }
509
510    // Événements
511    window.addEventListener("keydown", handleKeypress);
512    volumeMusicSlider.addEventListener("input", handleVolumeMusicChange);
513    volumeSoundEffectsSlider.addEventListener("input", handleVolumeSoundEffectsChange);
514    keyBindingsInput.forEach(input => input.addEventListener("change", handleKeyBindingChange));
515    saveSettingsButton.addEventListener("click", saveSettings);
516    startButton.addEventListener("click", startGame);
517    stopButton.addEventListener("click", stopGame);
518    settingsButton.addEventListener("click", () => {
519      settingsMenu.style.display = "block";
520    });
521
522    // Fonction pour initialiser le jeu
523    function initGame() {
524      // Dessiner le fond du jeu
525      drawBackground();
526      // Dessiner les flocons de neige
527      // ...
528      // Dessiner les nuages
529      // ...
530      // Dessiner les oiseaux
531      // ...
532      // Dessiner les drones
533      // ...
534      // Dessiner les étoiles
535      // ...
536      // Dessiner les cadeaux
537      // ...
538      // Dessiner les cheminées
539      // ...
540      // Dessiner le traîneau du Père Noël
541      // ...
542    }
543
544    // Fonction pour ouvrir le menu des paramètres
545    function openSettingsMenu() {
546      settingsMenu.style.display = "block";
547    }
548
549    // Fonction pour fermer le menu des paramètres
550    function closeSettingsMenu() {
551      settingsMenu.style.display = "none";
552    }
553
554    // Initialisation du jeu
555    initGame();
556  </script>
557</body>
558</html>
<!DOCTYPE html>
<html>
<head>
  <title>Santa Express</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }

    #game-container {
      width: 800px;
      height: 600px;
      border: 1px solid black;
    }

    #settings-menu {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      padding: 20px;
      border: 1px solid black;
      display: none;
    }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 20px;
    }

    #start-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 10px 20px;
      background-color: green;
      color: white;
      border: none;
      cursor: pointer;
    }

    #stop-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 10px 20px;
      background-color: red;
      color: white;
      border: none;
      cursor: pointer;
      display: none;
    }

    #settings-button {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 10px 20px;
      background-color: blue;
      color: white;
      border: none;
      cursor: pointer;
    }

    .settings-label {
      display: block;
      margin-bottom: 5px;
    }

    .settings-input {
      width: 100%;
      padding: 5px;
      margin-bottom: 10px;
    }

    #save-settings {
      padding: 10px 20px;
      background-color: green;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <canvas id="game-container"></canvas>

  <div id="score"></div>

  <button id="start-button">Démarrer</button>
  <button id="stop-button">Arrêter</button>
  <button id="settings-button">Paramètres</button>

  <div id="settings-menu">
    <label class="settings-label" for="volume-music">Volume de la musique:</label>
    <input class="settings-input" type="range" id="volume-music" min="0" max="1" step="0.1" value="0.5">

    <label class="settings-label" for="volume-sound-effects">Volume des effets sonores:</label>
    <input class="settings-input" type="range" id="volume-sound-effects" min="0" max="1" step="0.1" value="0.5">

    <label class="settings-label" for="up">Touche Haut:</label>
    <input class="settings-input key-binding-input" type="text" id="up" name="up" value="ArrowUp">

    <label class="settings-label" for="down">Touche Bas:</label>
    <input class="settings-input key-binding-input" type="text" id="down" name="down" value="ArrowDown">

    <label class="settings-label" for="left">Touche Gauche:</label>
    <input class="settings-input key-binding-input" type="text" id="left" name="left" value="ArrowLeft">

    <label class="settings-label" for="right">Touche Droite:</label>
    <input class="settings-input key-binding-input" type="text" id="right" name="right" value="ArrowRight">

    <button id="save-settings">Enregistrer</button>
  </div>

  <script>
    // Initialisation des variables
    let gameStarted = false;
    let score = 0;
    let volumeMusic = 0.5;
    let volumeSoundEffects = 0.5;
    let keyBindings = {
      up: "ArrowUp",
      down: "ArrowDown",
      left: "ArrowLeft",
      right: "ArrowRight"
    };

    // Éléments du DOM
    const gameContainer = document.getElementById("game-container");
    const scoreDisplay = document.getElementById("score");
    const settingsMenu = document.getElementById("settings-menu");
    const volumeMusicSlider = document.getElementById("volume-music");
    const volumeSoundEffectsSlider = document.getElementById("volume-sound-effects");
    const keyBindingsInput = document.querySelectorAll(".key-binding-input");
    const saveSettingsButton = document.getElementById("save-settings");
    const startButton = document.getElementById("start-button");
    const stopButton = document.getElementById("stop-button");
    const settingsButton = document.getElementById("settings-button");

    // Images
    const santaSleighImage = new Image();
    santaSleighImage.src = "assets/images/santa-sleigh.png";
    const presentImage = new Image();
    presentImage.src = "assets/images/present.png";
    const chimneyImage = new Image();
    chimneyImage.src = "assets/images/chimney.png";
    const cloudImage = new Image();
    cloudImage.src = "assets/images/cloud.png";
    const birdImage = new Image();
    birdImage.src = "assets/images/bird.png";
    const droneImage = new Image();
    droneImage.src = "assets/images/drone.png";
    const starImage = new Image();
    starImage.src = "assets/images/star.png";
    const backgroundImage = new Image();
    backgroundImage.src = "assets/images/background.png";
    const snowflakeImage = new Image();
    snowflakeImage.src = "assets/images/snowflake.png";

    // Sons
    const jingleMusic = new Audio("assets/sounds/jingle.mp3");
    const dropSound = new Audio("assets/sounds/drop.mp3");
    const collectSound = new Audio("assets/sounds/collect.mp3");
    const crashSound = new Audio("assets/sounds/crash.mp3");
    const successSound = new Audio("assets/sounds/success.mp3");

    // Objets du jeu
    const santaSleigh = {
      x: 100,
      y: 300,
      width: 50,
      height: 30,
      speed: 5
    };

    const presents = [];
    const chimneys = [];
    const stars = [];
    const clouds = [];
    const birds = [];
    const drones = [];

    // Fonction pour dessiner le fond
    function drawBackground() {
      gameContainer.getContext("2d").drawImage(backgroundImage, 0, 0);
    }

    // Fonction pour dessiner un flocon de neige
    function drawSnowflake(x, y) {
      gameContainer.getContext("2d").drawImage(snowflakeImage, x, y);
    }

    // Fonction pour dessiner un nuage
    function drawCloud(x, y) {
      gameContainer.getContext("2d").drawImage(cloudImage, x, y);
    }

    // Fonction pour dessiner un oiseau
    function drawBird(x, y) {
      gameContainer.getContext("2d").drawImage(birdImage, x, y);
    }

    // Fonction pour dessiner un drone
    function drawDrone(x, y) {
      gameContainer.getContext("2d").drawImage(droneImage, x, y);
    }

    // Fonction pour dessiner une étoile
    function drawStar(x, y) {
      gameContainer.getContext("2d").drawImage(starImage, x, y);
    }

    // Fonction pour dessiner un traîneau du Père Noël
    function drawSantaSleigh(x, y) {
      gameContainer.getContext("2d").drawImage(santaSleighImage, x, y);
    }

    // Fonction pour dessiner un cadeau
    function drawPresent(x, y) {
      gameContainer.getContext("2d").drawImage(presentImage, x, y);
    }

    // Fonction pour dessiner une cheminée
    function drawChimney(x, y) {
      gameContainer.getContext("2d").drawImage(chimneyImage, x, y);
    }

    // Fonction pour mettre à jour le score
    function updateScore() {
      scoreDisplay.textContent = "Score: " + score;
    }

    // Fonction pour gérer les collisions
    function handleCollisions(x, y, width, height) {
      // Vérifier si le traîneau du Père Noël est en collision avec un obstacle
      // (par exemple, un drone, un oiseau ou un nuage)
      drones.forEach(drone => {
        if (
          x < drone.x + drone.width &&
          x + width > drone.x &&
          y < drone.y + drone.height &&
          y + height > drone.y
        ) {
          crashSound.play();
          santaSleigh.x = 100;
          santaSleigh.y = 300;
        }
      });

      birds.forEach(bird => {
        if (
          x < bird.x + bird.width &&
          x + width > bird.x &&
          y < bird.y + bird.height &&
          y + height > bird.y
        ) {
          crashSound.play();
          santaSleigh.x = 100;
          santaSleigh.y = 300;
        }
      });

      clouds.forEach(cloud => {
        if (
          x < cloud.x + cloud.width &&
          x + width > cloud.x &&
          y < cloud.y + cloud.height &&
          y + height > cloud.y
        ) {
          crashSound.play();
          santaSleigh.x = 100;
          santaSleigh.y = 300;
        }
      });
    }

    // Fonction pour gérer les cadeaux
    function handlePresents(x, y, width, height) {
      // Vérifier si un cadeau atteint une cheminée
      presents.forEach((present, index) => {
        chimneys.forEach(chimney => {
          if (
            present.x < chimney.x + chimney.width &&
            present.x + present.width > chimney.x &&
            present.y < chimney.y + chimney.height &&
            present.y + present.height > chimney.y
          ) {
            successSound.play();
            score++;
            updateScore();
            presents.splice(index, 1);
          }
        });
      });
    }

    // Fonction pour gérer les étoiles
    function handleStars(x, y, width, height) {
      // Vérifier si le traîneau du Père Noël collecte une étoile
      stars.forEach((star, index) => {
        if (
          x < star.x + star.width &&
          x + width > star.x &&
          y < star.y + star.height &&
          y + height > star.y
        ) {
          collectSound.play();
          score += 10;
          updateScore();
          stars.splice(index, 1);
        }
      });
    }

    // Fonction pour mettre à jour le jeu
    function updateGame() {
      // Mettre à jour la position du traîneau du Père Noël en fonction des touches appuyées
      if (keyBindings.up === "ArrowUp" && santaSleigh.y > 0) {
        santaSleigh.y -= santaSleigh.speed;
      }
      if (keyBindings.down === "ArrowDown" && santaSleigh.y < gameContainer.height - santaSleigh.height) {
        santaSleigh.y += santaSleigh.speed;
      }
      if (keyBindings.left === "ArrowLeft" && santaSleigh.x > 0) {
        santaSleigh.x -= santaSleigh.speed;
      }
      if (keyBindings.right === "ArrowRight" && santaSleigh.x < gameContainer.width - santaSleigh.width) {
        santaSleigh.x += santaSleigh.speed;
      }

      // Dessiner le fond et tous les éléments du jeu
      gameContainer.getContext("2d").clearRect(0, 0, gameContainer.width, gameContainer.height);
      drawBackground();

      // Dessiner les flocons de neige
      for (let i = 0; i < 50; i++) {
        drawSnowflake(Math.random() * gameContainer.width, Math.random() * gameContainer.height);
      }

      // Dessiner les nuages
      clouds.forEach(cloud => {
        drawCloud(cloud.x, cloud.y);
      });

      // Dessiner les oiseaux
      birds.forEach(bird => {
        drawBird(bird.x, bird.y);
      });

      // Dessiner les drones
      drones.forEach(drone => {
        drawDrone(drone.x, drone.y);
      });

      // Dessiner les étoiles
      stars.forEach(star => {
        drawStar(star.x, star.y);
      });

      // Dessiner les cadeaux
      presents.forEach(present => {
        drawPresent(present.x, present.y);
      });

      // Dessiner les cheminées
      chimneys.forEach(chimney => {
        drawChimney(chimney.x, chimney.y);
      });

      // Dessiner le traîneau du Père Noël
      drawSantaSleigh(santaSleigh.x, santaSleigh.y);

      // Gérer les collisions
      handleCollisions(santaSleigh.x, santaSleigh.y, santaSleigh.width, santaSleigh.height);

      // Gérer les cadeaux
      handlePresents(santaSleigh.x, santaSleigh.y, santaSleigh.width, santaSleigh.height);

      // Gérer les étoiles
      handleStars(santaSleigh.x, santaSleigh.y, santaSleigh.width, santaSleigh.height);

      // Mettre à jour le score
      updateScore();

      // Continuer la boucle de jeu
      requestAnimationFrame(updateGame);
    }

    // Fonction pour démarrer le jeu
    function startGame() {
      gameStarted = true;
      // Initialiser le jeu
      jingleMusic.play();
      jingleMusic.volume = volumeMusic;

      // Générer des cadeaux
      for (let i = 0; i < 10; i++) {
        presents.push({
          x: Math.random() * gameContainer.width,
          y: 0,
          width: 30,
          height: 30
        });
      }

      // Générer des cheminées
      for (let i = 0; i < 5; i++) {
        chimneys.push({
          x: Math.random() * gameContainer.width,
          y: gameContainer.height - 100,
          width: 40,
          height: 80
        });
      }

      // Générer des étoiles
      for (let i = 0; i < 20; i++) {
        stars.push({
          x: Math.random() * gameContainer.width,
          y: Math.random() * gameContainer.height,
          width: 20,
          height: 20
        });
      }

      // Générer des nuages
      for (let i = 0; i < 5; i++) {
        clouds.push({
          x: Math.random() * gameContainer.width,
          y: Math.random() * gameContainer.height / 2,
          width: 100,
          height: 50
        });
      }

      // Générer des oiseaux
      for (let i = 0; i < 10; i++) {
        birds.push({
          x: Math.random() * gameContainer.width,
          y: Math.random() * gameContainer.height / 2,
          width: 30,
          height: 20
        });
      }

      // Générer des drones
      for (let i = 0; i < 5; i++) {
        drones.push({
          x: Math.random() * gameContainer.width,
          y: Math.random() * gameContainer.height / 2,
          width: 40,
          height: 30
        });
      }

      // Démarrer la boucle de jeu
      requestAnimationFrame(updateGame);
    }

    // Fonction pour arrêter le jeu
    function stopGame() {
      gameStarted = false;
      // Arrêter la boucle de jeu
      jingleMusic.pause();
    }

    // Fonction pour gérer les événements des touches
    function handleKeypress(event) {
      if (gameStarted) {
        // Mettre à jour la position du traîneau du Père Noël en fonction de la touche appuyée
        // ...
      }
    }

    // Fonction pour gérer les événements du curseur du volume de la musique
    function handleVolumeMusicChange(event) {
      volumeMusic = event.target.value;
      jingleMusic.volume = volumeMusic;
    }

    // Fonction pour gérer les événements du curseur du volume des effets sonores
    function handleVolumeSoundEffectsChange(event) {
      volumeSoundEffects = event.target.value;
      dropSound.volume = volumeSoundEffects;
      collectSound.volume = volumeSoundEffects;
      crashSound.volume = volumeSoundEffects;
      successSound.volume = volumeSoundEffects;
    }

    // Fonction pour gérer les événements de changement des touches
    function handleKeyBindingChange(event) {
      // Mettre à jour les touches du jeu
      keyBindings[event.target.name] = event.target.value;
    }

    // Fonction pour enregistrer les paramètres
    function saveSettings() {
      // Enregistrer les paramètres du jeu
      // ...
      settingsMenu.style.display = "none";
    }

    // Événements
    window.addEventListener("keydown", handleKeypress);
    volumeMusicSlider.addEventListener("input", handleVolumeMusicChange);
    volumeSoundEffectsSlider.addEventListener("input", handleVolumeSoundEffectsChange);
    keyBindingsInput.forEach(input => input.addEventListener("change", handleKeyBindingChange));
    saveSettingsButton.addEventListener("click", saveSettings);
    startButton.addEventListener("click", startGame);
    stopButton.addEventListener("click", stopGame);
    settingsButton.addEventListener("click", () => {
      settingsMenu.style.display = "block";
    });

    // Fonction pour initialiser le jeu
    function initGame() {
      // Dessiner le fond du jeu
      drawBackground();
      // Dessiner les flocons de neige
      // ...
      // Dessiner les nuages
      // ...
      // Dessiner les oiseaux
      // ...
      // Dessiner les drones
      // ...
      // Dessiner les étoiles
      // ...
      // Dessiner les cadeaux
      // ...
      // Dessiner les cheminées
      // ...
      // Dessiner le traîneau du Père Noël
      // ...
    }

    // Fonction pour ouvrir le menu des paramètres
    function openSettingsMenu() {
      settingsMenu.style.display = "block";
    }

    // Fonction pour fermer le menu des paramètres
    function closeSettingsMenu() {
      settingsMenu.style.display = "none";
    }

    // Initialisation du jeu
    initGame();
  </script>
</body>
</html>
